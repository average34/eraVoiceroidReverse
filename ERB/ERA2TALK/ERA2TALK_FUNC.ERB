;==================================================
;
;	era2talk用関数
;	改造・再配布ご自由にどうぞ
;
;==================================================

;-------------------------------------------------
;口上表示・保存関数@PRINTFORMW2T
;口上をグローバル変数として保存(読み上げ)し、また表示もする

;通常の口上に於いては、
;PRINTFORMW 「(.+)」
;を
;CALL PRINTFORMW2T , "「$1」"
;に正規表現置換すると良い感じに動作するはず
;（エディタによってはクォーテーションの前にバックスラッシュつける必要あるかも）
;
;""内に変数を含む口上（%CALLNAME:MASTER%とか）の場合は、上記の置換に加え、
;%(.+)%
;を
;" + $1 + "
;に置換すればちゃんと動作する（%を外すのがポイント）
;
;-------------------------------------------------
@PRINTFORMW2T(ARGS:0 = "")
;スキップ中ならば読み上げない
IF MESSKIP() == 0
;昔のバージョンのEmueraだとそもそもMESSKIPが無いのでMOUSESKIPを使うといいかも
;IF MOUSESKIP == 0
;IF 1
	;保存
	E2T_GLOBAL = %ARGS:0%
	SAVEGLOBAL
ENDIF

;表示
PRINTFORMW %ARGS:0%

;-------------------------------------------------
;口上保存関数@SAVE2T
;保存(読み上げ)はするが表示はしない
;表示と発音で表記を変えるとき（「膣内」で「なか」みたいな）に使う
;ボイロが読み間違いするときにも使うと良さげ
;-------------------------------------------------
@SAVE2T(ARGS:0 = "")
;保存

IF MESSKIP() == 0
	E2T_GLOBAL = %ARGS:0%
	SAVEGLOBAL
ENDIF

;-------------------------------------------------
;変数削除関数@DEL2T
;変数を初期化して保存する
;2行を1関数にまとめるっていうだけ
;もしグローバル変数を読み上げ用以外で保存する前にいったん破棄しようって使い方をするなら
;普通に E2T_GLOBAL = "" っていう1行を書くだけでよい
;-------------------------------------------------
@DEL2T
;保存
E2T_GLOBAL = ""
SAVEGLOBAL

;-------------------------------------------------
;OGG読み上げ関数@OGG2T
;ARGS:0には「拡張子つきの」ファイル名をつける　フルパスではない
;-------------------------------------------------
@OGG2T(ARGS:0 = "")
;保存

IF MESSKIP() == 0
	E2T_GLOBAL = "OGG:" + %ARGS:0%
	SAVEGLOBAL
ENDIF


