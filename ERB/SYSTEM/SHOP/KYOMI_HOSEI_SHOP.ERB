
@HOSEI_SHOP
DRAWLINE
SIF FLAG:デバッグ
	PRINTL 選択したメニューの興味を増減することができます
FOR LOCAL, 0, 200
	IF STR:(100 + LOCAL) != ""
		PRINTFORM [{LOCAL, 3}]  
		PRINTFORM %STR:(100 + LOCAL), 20, LEFT%  
		PRINTFORML ({CFLAG:(400 + LOCAL), 4})  
	ENDIF
NEXT
PRINTL [999] 戻る

$INPUT_LOOP_HOSEISHOP1
INPUT

SIF RESULT == 999
	RETURN 0
IF RESULT < 200 && STR:(100 + RESULT) != "" && FLAG:デバッグ
	CALL HOSEI_SHOP2(RESULT)
ELSE
	GOTO INPUT_LOOP_HOSEISHOP1
ENDIF

;ARG は 変更するコマンド番号
@HOSEI_SHOP2(ARG)
#LOCALSIZE 200
;選択肢用
LOCAL:1 = 1
LOCAL:2 = 2
LOCAL:3 = 3
LOCAL:4 = 4
LOCAL:5 = 5
LOCAL:6 = 10
LOCAL:7 = 20
LOCAL:8 = 30
LOCAL:9 = 50
;単価
IF FLAG:デバッグ
	LOCAL:100 = 0
ELSE
	LOCAL:100 = 100
ENDIF

PRINTFORML 増減する量を選んでください（所持金${MONEY}）
PRINTFORML %STR:(100 + ARG)%({CFLAG:(400 + ARG)}) を
FOR LOCAL:0, 1, 9
	PRINTFORM	[{LOCAL:(LOCAL:0), 3}] {LOCAL:(LOCAL:0), 2}増やす(${LOCAL:(LOCAL:0) * LOCAL:100, 4})　　
	PRINTFORML	[{LOCAL:(LOCAL:0) + 100, 3}] {LOCAL:(LOCAL:0), 2}減らす(${LOCAL:(LOCAL:0) * LOCAL:100, 4})
NEXT
PRINTL [  0] 戻る

$INPUT_LOOP_HOSEISHOP2
INPUT

IF RESULT == 0
	RETURN 0
ELSEIF RESULT <= 100
	IF MONEY < RESULT * LOCAL:100
		PRINTL お金が足りません
		GOTO INPUT_LOOP_HOSEISHOP2
	ELSE
		MONEY -= RESULT * LOCAL:100
		CFLAG:(400 + ARG) += RESULT
		PRINTL 興味があがりました
		PRINTFORML %STR:(100 + ARG)%({CFLAG:(400 + ARG)})
	ENDIF
ELSEIF RESULT <= 200
	IF MONEY < (RESULT - 100) * LOCAL:100
		PRINTL お金が足りません
		GOTO INPUT_LOOP_HOSEISHOP2
	ELSE
		MONEY -= (RESULT - 100) * LOCAL:100
		CFLAG:(400 + ARG) -= RESULT - 100
		PRINTL 興味がさがりました
		PRINTFORML %STR:(100 + ARG)%({CFLAG:(400 + ARG)})
	ENDIF
ELSE
	GOTO INPUT_LOOP_HOSEISHOP2
ENDIF

RETURN 0