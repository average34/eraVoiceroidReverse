;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	すずきつづみ口上 調教者行動前イベント口上ファイル
;
;	調教者行動前イベント口上をまとめたファイル
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;========================================================================
;EV12, 調教者行動前口上
;========================================================================
;・TRAIN_PROCCES.ERB内、@TRAIN_CANCELから呼び出される
;・口上主のパラメータ表示の直後に表示。調教指示は既に決定されている
;・調教中止宣言の差し替えや、調教ターン開始前にご主人様から一言、のように書くことも可能
;・午前、午後の調教開始ではなく、調教ターンの開始前には毎回呼び出される箇所
;・その為もあって、調教中止時と経過時間0以外の箇所はIF 口上記入チェック(25)等として確率表示する事を推奨
;・調教中止時にのみ地の文が存在する
;・文章表示後に本体側のDRAWLINE処理あり
;-------------------------------------------------
;FIRSTEVENT(0)～や、FIRSTEVENT(10)～などとして枠毎に割り当てていますが
;FIRSTEVENT/ONCEEVENT/RANDEVENT/ORDEREVENTは事実上無限にイベント番号を増やせるので
;必要に応じて任意に割り当てて下さい
;-------------------------------------------------
@KOJO_EVENT_K12_12(ARG)
;-------------------------------------------------
;引数内訳…
;ARG(0=調教可/1=口上主の疲労で中止/2=調教対象の疲労で中止/3=ご褒美による中止)
;-------------------------------------------------

;────────────────────────────────────
;調教中止 ARG:1 ARG:2 ARG:3 FIRSTEVENT(0)～
;────────────────────────────────────
;・疲労、もしくはご褒美による調教中止の場合の口上
;・記入チェック=1の場合は口上表示後本体側でPRINTLの空行が入る
;・記入チェックを=2にすると、地の文を表示しない
;・というかRESULT > 2で判定されるので2以上なら同じ挙動になりますが一応非推奨ということで
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;ご褒美による中止
;RESULT値（1, 口上の後に地の文を表示(非推奨)、2, 口上のみ表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 3
	;記入チェックを2以下にした場合は以下の地の文が表示される。表示タイミングは口上表示の後
	;%CALLNAME:TARGET%は今日の調教を中止し、
	;%CALLNAME:MASTER%とまったりとした時間を過ごした…
	PRINTFORMW 
	RETURN 2
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;調教者の疲労による中止
;RESULT値（1, 口上の後に地の文を表示(非推奨)、2, 口上のみ表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 1
	;記入チェックを2以下にした場合は以下の地の文が表示される。表示タイミングは口上表示の後
	;調教の時間が来たが、入ってきた%CALLNAME:TARGET%はなにやら疲れている様子で、
	;今回は休みだと言って出ていった…
	PRINTFORMW 
	RETURN 2
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;調教対象の疲労による中止
;RESULT値（1, 口上の後に地の文を表示(非推奨)、2, 口上のみ表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 2
	;記入チェックを2以下にした場合は以下の地の文が表示される。表示タイミングは口上表示の後
	;調教の時間が来たが、%CALLNAME:TARGET%は酷い様子の%CALLNAME:MASTER%を見てしばらく考えると、
	;今回は休んでいいと言って出ていった…
	PRINTFORMW 
	RETURN 2
ENDIF

;-------------------------------------------------
;・以下、ARG:0(調教可)相当
;・TRAIN_PROCCES.ERB内、@BEFORE_ACTから呼び出される
;・この時点でACTはすでに決定しているがACT派生の決定はなされていない
;・NOWEXのリセットはなされていない
;・これらの箇所を抜けた後にACT開始になる
;・分岐の増減は自由にできますが、優先度には注意しましょう
;-------------------------------------------------

;────────────────────────────────────
;調教開始直後 FIRSTEVENT(10)～
;────────────────────────────────────
;・経過時間が0である場合に表示される
;・その回の調教開始直後に一度きりで、以後その調教中には表示されない
;・この箇所を抜けた後にACT開始になる
;-------------------------------------------------
;　ここでIS_POLICY("今日", "お仕置き")等で今日の方針を喋らせる事も可能だったりしますが
;　EVENT17, 本日の方針口上と被る可能性があります
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;調教開始直後
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && !TFLAG:経過時間
	;=================================================
	;調教者が少し疲れている
	;=================================================
	IF 口上記入チェック(0) && CFLAG:消耗 > 2
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;ARG:3の分岐を書いた場合は不要な箇所
	;=================================================
	;ご褒美による調教中止の場合
	;=================================================
	IF IS_POLICY("今日", "休憩")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;ARG:1の分岐を書いた場合は不要な箇所
	;=================================================
	;調教対象の疲労による中止
	;=================================================
	IF 口上記入チェック(0) && CFLAG:MASTER:消耗 > 5
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;調教対象が少し疲れている
	;=================================================
	IF 口上記入チェック(0) && CFLAG:MASTER:消耗 > 2
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;調教対象への好感度1000以上
	;=================================================
	IF 口上記入チェック(0) && AFFECTION("眷愛")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他・条件なし
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;お仕置き FIRSTEVENT(20)～
;────────────────────────────────────
;・TFLAG:お仕置きフラグが立っている場合に表示される箇所
;・お仕置きフラグが立っていても、加虐系以外のACTになる場合がある
;-------------------------------------------------
;加虐系ACT、派生する事により加虐系に含まれる可能性のあるイラマチオ
;衣装の変更を要求する/不気味に笑う/アナルバイブ/後背位/アナルセックス/自慰/野外プレイ/放尿/足舐め強制
;異常系ACT/性交奉仕系ACT
;上記のACT以外はTFLAG:お仕置きフラグによってACT_ABLEで規制される(0616版時点)
;-------------------------------------------------
;-------------------------------------------------
;・一回の調教で一回のみ表示される
;━━━━━━━━━━━━━━━━━━━━━━━━
;お仕置き開始 
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TFLAG:お仕置きフラグ && ONCEEVENT(20)
	;=================================================
	;前回ACTがお仕置き宣言
	;=================================================
	IF 口上記入チェック(0) && IS_PREVACTNAME("お仕置きと宣言する")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他・条件なし
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;-------------------------------------------------
;お仕置き開始以外を処理する箇所
;━━━━━━━━━━━━━━━━━━━━━━━━
;お仕置き中
;口上記入チェック(確率％, 入力した数字の確率で口上を表示)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TFLAG:お仕置きフラグ
	;=================================================
	;前回ACTがお仕置き宣言かつ今回ACTが加虐系
	;=================================================
	IF 口上記入チェック(0) && MENUMATCH(TFLAG:ACT, "加虐") && IS_PREVACTNAME("お仕置きと宣言する")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;前回ACTがお仕置き宣言
	;=================================================
	IF 口上記入チェック(0) && IS_PREVACTNAME("お仕置きと宣言する")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他・条件なし
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;膣内、腸内射精直後 FIRSTEVENT(30)～
;────────────────────────────────────
;NOWEX:射精ないしNOWEX:MASTER:射精で射精種の参照も可能だったりしますが
;EVENT20, 絶頂口上に同種の分岐がると被る可能性もあります
;-------------------------------------------------
;関連変数…
;
;TFLAG:前回中出し(1=Ｖ性交/2=Ｖ性交奉仕/3=Ｖ性交(空射)/4=Ｖ性交奉仕(空射)/5=Ａ性交/6=Ａ性交奉仕/7=Ａ性交(空射)/8=Ａ性交奉仕(空射)
;NOWEX:射精(1=空射精/2=射精/3=大量射精/4=射精(早漏)/5=A責射精)
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;膣内射精直後(調教対象→調教者)
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && GROUPMATCH(TFLAG:前回中出し, 2, 4)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック(0) && TFLAG:前回中出し == 4
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;腸内射精直後(調教対象→調教者)
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && GROUPMATCH(TFLAG:前回中出し, 6, 8)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック(0) && TFLAG:前回中出し == 8
		PRINTFORMW 
		RETURN 1
	ENDIF
		
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;膣内射精直後(調教者→調教対象)
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && GROUPMATCH(TFLAG:前回中出し, 1, 3)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック(0) && TFLAG:前回中出し == 3
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;腸内射精直後(調教者→調教対象)
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && GROUPMATCH(TFLAG:前回中出し, 5, 7)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック(0) && TFLAG:前回中出し == 7
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;性交中・性交奉仕中 FIRSTEVENT(40)～
;────────────────────────────────────
;関連変数…
;TEQUIP:性交中(調教者が調教対象に挿入中) (1=正常位/2=後背位/3=騎乗位/4=対面座位/5=背面座位/6=アナルセックス)
;TEQUIP:性交奉仕中(調教対象が調教者に挿入中) 内容は上記のものと同じ
;
;関連関数…
;V_SEX (=TARGET, TEQUIP:性交中 < 6/=MASTER, TEQUIP:性交奉仕中 < 6)と同義
;A_SEX (=TARGET, TEQUIP:性交中 == 6/MASTER, TEQUIP:性交奉仕中 == 6)と同義
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;性交中(調教者→調教対象)
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TEQUIP:性交中
	;=================================================
	;ペニスバンド使用
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(!PENIS(TARGET), TEQUIP:調教者ペニスバンド) > 0
		;アナルセックス中
		IF A_SEX(TARGET)
			PRINTFORMW 
		;その他の性交系
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	
	;=================================================
	;アナルセックス(Ａ性交)
	;=================================================
	IF 口上記入チェック(0) && A_SEX(TARGET)
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他の性交系(Ｖ性交)
	;=================================================
	IF 口上記入チェック(0) && V_SEX(TARGET)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;性交奉仕中(調教対象→調教者)
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TEQUIP:性交奉仕中
	;=================================================
	;ペニスバンド使用
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(!PENIS(MASTER), TEQUIP:ペニスバンド) > 0
		;アナルセックス中
		IF A_SEX(MASTER)
			PRINTFORMW 
		;その他性交奉仕系
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	
	;=================================================
	;アナルセックス(Ａ性交奉仕)
	;=================================================
	IF 口上記入チェック(0) && A_SEX(MASTER)
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他性交奉仕系(Ｖ性交奉仕)
	;=================================================
	IF 口上記入チェック(0) && V_SEX(MASTER)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;絶頂した直後 FIRSTEVENT(50)～
;────────────────────────────────────
;・調教者、調教対象が絶頂した場合に表示される口上
;・個別の部位別絶頂を拾いたいなら、IF 口上記入チェック(0) && NOWEX:Ｃ絶頂等の分岐を追加してください
;・射精種はNOWEX:射精/NOWEX:MASTER:射精で参照する事が可能です
;-------------------------------------------------
;関連変数…
;NOWEX:射精(1=空射精/2=射精/3=大量射精/4=射精(早漏)/5=A責射精)
;
;関連関数…
;TRUECHECK 真になるものがいくつあるかを返す
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;調教者が絶頂した直後
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TRUECHECK(NOWEX:Ｃ絶頂, NOWEX:Ｖ絶頂, NOWEX:Ａ絶頂, NOWEX:Ｂ絶頂) > 0
	;=================================================
	;調教者射精
	;=================================================
	IF 口上記入チェック(0) && NOWEX:射精
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;各部位の絶頂が1つ以上の場合に真になる箇所
	;=================================================
	;多重絶頂
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(NOWEX:Ｃ絶頂, NOWEX:Ｖ絶頂, NOWEX:Ａ絶頂, NOWEX:Ｂ絶頂) > 1
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他・条件なし
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;調教対象が絶頂した直後
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TRUECHECK(NOWEX:MASTER:Ｃ絶頂, NOWEX:MASTER:Ｖ絶頂, NOWEX:MASTER:Ａ絶頂, NOWEX:MASTER:Ｂ絶頂) > 0
	;=================================================
	;射精
	;=================================================
	IF 口上記入チェック(0) && NOWEX:MASTER:射精
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;各部位の絶頂が1つ以上の場合に真になる箇所
	;=================================================
	;多重絶頂
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(NOWEX:MASTER:Ｃ絶頂, NOWEX:MASTER:Ｖ絶頂, NOWEX:MASTER:Ａ絶頂, NOWEX:MASTER:Ｂ絶頂) > 1
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他・条件なし
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;調教方針変更 FIRSTEVENT(60)
;────────────────────────────────────
;・調教方針が変わったときに表示する
;・あくまでも方針なので行動を細かく決定するものではない
;-------------------------------------------------
;関連変数…
;TFLAG:ターン方針		このターンの調教方針(1=休憩/2=ソフト/3=ノーマル/4=ハード/5=異常)
;TFLAG:前ターン方針		前ターンの調教方針(内容はターン方針と同じ)
;
;関連関数…
;IS_POLICY	調教方針名称と合致すれば真を返す
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;調教方針変更
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TFLAG:ターン方針 != TFLAG:前ターン方針
	;=================================================
	;ターン方針1:休憩（確実に体力回復行動になる）
	;=================================================
	IF 口上記入チェック(0) && IS_POLICY("今", "休憩")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;ターン方針2:ソフト
	;=================================================
	IF 口上記入チェック(0) && IS_POLICY("今", "ソフト")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;ターン方針3:ノーマル
	;=================================================
	IF 口上記入チェック(0) && IS_POLICY("今", "ノーマル")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;ターン方針4:ハード
	;=================================================
	IF 口上記入チェック(0) && IS_POLICY("今", "ハード")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;ターン方針5:異常
	;=================================================
	IF 口上記入チェック(0) && IS_POLICY("今", "異常")
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;条件なし FIRSTEVENT(70)～
;────────────────────────────────────
;・ここまでの条件にヒットしなかった場合に表示される箇所
;・BASEで小分岐を設けてありますが、任意の条件を追加する事もできます
;------------------------------------------------
;関連変数…
;BASE		(0, 体力/1, 気力/2, 射精/3, 母乳/4, 尿意/5, 理性/6, 興味/7, 苛立ち/8, 満足)
;
;関連関数…
;TENSION	引数で指定したBASE値を表す(50%以上は高い、25%以上は一般、25%未満は低い)
;------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;条件なし
;口上記入チェック（確率％, 入力した数字の確率で口上を表示）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0)
	;=================================================
	;満足50％以上
	;=================================================
	IF 口上記入チェック(0) && TENSION(TARGET, 8) == "高い"
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;理性25％以下
	;=================================================
	IF 口上記入チェック(0) && TENSION(TARGET, 5) == "低い"
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;興味25％以下
	;=================================================
	IF 口上記入チェック(0) && TENSION(TARGET, 6) == "低い"
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;苛立ち50％以上
	;=================================================
	IF 口上記入チェック(0) && TENSION(TARGET, 7) == "高い"
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;その他・条件なし
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF